String workerDir = 'inference-api'
String credentialsId = 'deploy-key-github'
def remote = [:]

pipeline {
    agent any
    //  parameters {
    // }
    stages {
        stage('Update Source Code') {
            steps {
                script {
                    sshagent(['grit-ssh-uat']) {
                        sh "ssh  -o StrictHostKeyChecking=no   grit@43.229.132.128 git -C /home/grit/cryptoplat/portal-service pull;"
                }       
            }
            }
        }
        stage('Docker Deploy') {
            steps {
                script {
                    sshagent(['grit-ssh-uat']) {
                        sh "ssh  -o StrictHostKeyChecking=no   grit@43.229.132.128 docker-compose -f  /home/grit/cryptoplat/docker-compose.yaml up -d --build portal-service;"
                }       
            }
            }
        }
    }
}